The Kinde Expo SDK allows developers to quickly and securely integrate a new or an existing Expo application into the Kinde platform.

## Before you begin

- If you haven’t already got a Kinde account, [register for free here](https://app.kinde.com/register) (no credit card required). Registering gives you a Kinde domain, which you need to get started, e.g. `yourapp.kinde.com`.
- All expo prerequisites are met. If not, follow the [Expo installation guide](https://docs.expo.dev/get-started/installation/).

## **Installation**

```shell
npm i @kinde/expo
yarn add @kinde/expo
pnpm add @kinde/expo
```

## **Kinde configuration**

1. In Kinde, go to **Settings &gt; Applications.**
2. Select **View details** on the **Front-end app**.
3. Scroll down to the **Callback URLs** section.
4. Add in the callback URLs for your React Native app, which should look something like this:
   - Allowed callback URLs - `myapp://myhost.kinde.com/kinde_callback`
   - Allowed logout redirect URLs - `myapp://myhost.kinde.com/kinde_callback`

Make sure you press the Save button at the bottom of the page!

Note: The `myapp://myhost.kinde.com/kinde_callback` is used as an example of local URL Scheme, change to the local local URL Scheme that you use.

## Environments

If you would like to use our Environments feature as part of your development process. You will need to create them first within your Kinde account. In this case you would use the Environment subdomain in the code block above.

## Configure your app

### **Environment variables**

Put these variables in your .env file. You can find these variables on the same page as where you set the callback URLs.

- `KINDE_ISSUER_URL` - your Kinde domain
- `KINDE_POST_CALLBACK_URL` - After the user authenticates we will callback to this address. Make sure this URL is under your allowed callback URLs
- `KINDE_POST_LOGOUT_REDIRECT_URL` - where you want users to be redirected to after logging out. Make sure this URL is under your allowed logout redirect URLs
- `KINDE_CLIENT_ID` - you can find this on the App Keys page

```markup
EXPO_PUBLIC_KINDE_DOMAIN=[yourapp.kinde.com]
EXPO_PUBLIC_KINDE_CLIENT_ID="ApplicationClientId"
// Optional (default: "openid profile email")
EXPO_PUBLIC_KINDE_SCOPES="openid profile email offline"
```

The redirection URL is automatically computed using Expo Auth Session `makeRedirectUri` function. You can find more information about this function [here](https://docs.expo.dev/versions/latest/sdk/auth-session/#makeRedirectUri).

## Integrate with your app

Setup the Kinde Provider in your App.js file.

```typescript
import { KindeAuthProvider } from '@kinde/expo';

export default function App() {
  return (
    <KindeAuthProvider>
      <!-- Your application code -->
    </KindeAuthProvider>
  );
}
```

## Authentication Methods

Simple and flexible functions for register, login and logout are part of the `useKindeAuth` hook

```typescript

export default function Authentication () {
	const kinde = useKindeAuth();


	const handleSignUp = async () => {
  		const token = await kinde.register();
  		if (token) {
  			// User was authenticated
  		}
	};

	const handleSignIn = async () => {
  		const token = await kinde.login();
  		if (token) {
    		// User was authenticated
  		}
	};

	return (
		{!isAuthnticated ? 
			<View>
        		<Pressable onPress={handleSignIn}><Text>Sign In</Text></Pressable>
       			<Pressable onPress={handleSignUp}><Text>Sign Up</Text></Pressable>
			</View>
		:
			<Pressable onPress={handleLogout}><Text>Logout</Text></Pressable>
		}
	)
}
```

### **Log in options**

```typescript
"audience" | "scope" | "isCreateOrg" | "prompt" | "lang" | "loginHint" | "orgCode" | "orgName" | "connectionId" | "redirectURL"
```

### Log out options

```javascript
"revokeToken"
```

## **Helper Methods**

## **How to test**

Run the test suite using the following command at the root of your React Native.

```shell
npm run test
```

Note: Ensure you have already run `npm install`.

If you need help connecting to Kinde, please contact us at [support@kinde.com](mailto:support@kinde.com).
