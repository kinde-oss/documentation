---
page_id: e7809c64-99c7-4640-b7d1-c22b35ed3222
title: Deploy a Kinde app on Cloudflare Workers
description: Deploy your Next.js application with Kinde authentication to Cloudflare Workers using OpenNext or similar adapters with proper environment configuration and authentication patterns.
sidebar:
  order: 3
relatedArticles:
  - 3a5cbe42-d4c2-4f41-a243-a4852fdcf4a5
  - 5905adbb-296e-41ed-ad14-73eb986eeca7
  - 7d311fcf-ca33-49ec-9286-419da4a91f41
  - a07f8f6b-5d6a-4096-be52-7b13b4a3b0a5
  - b3081ca1-2aa1-45e3-a42f-5295aac49bc3
tableOfContents:
  maxHeadingLevel: 3
topics:
  - developer-tools
  - guides
  - deployment
  - cloudflare
sdk:
  - nextjs-sdk
languages:
  - typescript
  - javascript
  - bash
audience:
  - developers
complexity: intermediate
keywords:
  - Cloudflare Workers deployment
  - Next.js deployment
  - environment variables
  - wrangler
  - opennext
  - edge runtime
  - callback URLs
updated: 2026-02-06
featured: false
deprecated: false
ai_summary: Deploy your Next.js application with Kinde authentication to Cloudflare Workers using OpenNext or similar adapters with proper environment configuration and authentication patterns.
---

Cloudflare Workers provide a serverless edge runtime for deploying Next.js applications. This guide covers the specific configuration required to get Kinde authentication working correctly in this environment.

<Aside type="warning" title="Important">

Cloudflare Workers have a different runtime environment than traditional Node.js servers. Some configurations that work on Vercel or standard Node.js deployments require adjustments for Cloudflare.

</Aside>

### What you need

- A [Kinde](https://www.kinde.com/) account (sign up for free)
- A [Cloudflare](https://www.cloudflare.com/) account (sign up for free)
- A running [Next.js application](/developer-tools/sdks/backend/nextjs-sdk/) configured with Kinde
- [Node.js](https://nodejs.org/) version 20 or higher

## Key differences for Cloudflare Workers

Before diving into setup, understand these critical differences when deploying Kinde auth to Cloudflare Workers:

| Consideration | Standard deployment | Cloudflare Workers |
| --- | --- | --- |
| Environment variables | `.env.local` or platform UI | Must be in `wrangler.toml` `[vars]` section |
| `process.env` access | Works by default | Requires `nodejs_compat_populate_process_env` flag |
| KindeProvider | Can be used in providers | Avoid for SSR - use server-side auth patterns |

## Step 1: Configure Cloudflare Workers in your existing project

1. Open your project in a terminal and install the OpenNext.js adapter for Cloudflare Workers with the following command:

    ```bash
    npm install @opennextjs/cloudflare@latest
    ```

2. Install Wrangler CLI as a dev dependency:

    ```bash
    npm i -D wrangler@latest
    ```

3. Create a new file called `wrangler.toml` in the root of your project and add the following content:

    ```bash
    touch wrangler.toml
    ```

    ```toml
    # wrangler.toml
    "$schema" = "./node_modules/wrangler/config-schema.json"
    main = ".open-next/worker.js"
    name = "my-app"
    compatibility_date = "2026-02-06"
    compatibility_flags = [ "nodejs_compat", "nodejs_compat_populate_process_env"]

    [assets]
    directory = ".open-next/assets"
    binding = "ASSETS"
    ```

4. Update your `package.json` to include the following scripts:

    ```json
    // package.json
    "scripts": {
      ...your other scripts...
      "preview": "opennextjs-cloudflare build && opennextjs-cloudflare preview",
      "deploy": "opennextjs-cloudflare build && opennextjs-cloudflare deploy",
      "cf-typegen": "wrangler types --env-interface CloudflareEnv cloudflare-env.d.ts"
    }
    ```

5. Preview your project in the Cloudflare environment using the following command:

    ```bash
    npm run preview
    ```

6. Add the generated `.open-next` directory to your `.gitignore` file.

    ```bash
    echo "/.open-next/" >> .gitignore
    ```

## Step 2: Deploy your project to Cloudflare Workers

1. Authorize Wrangler to access your Cloudflare account using the following command:

    ```bash
    wrangler login
    ```

    This will open your default web browser, prompting you to log in to your Cloudflare account and authorize Wrangler. Once logged in, you’ll see a confirmation page.

2. Deploy your project to Cloudflare Workers using the following command:

    ```bash
    npm run deploy
    ```

    This will deploy your project to Cloudflare Workers. You’ll get a link to see the changes.

    ```bash
    Uploaded my-app (.. sec)
    Deployed my-app triggers (.. sec)
    https://<your-app-name>.<your-account-name>.workers.dev
    ```

3. Verify your deployment by visiting the health endpoint at the URL you got from the previous command:

    ```
    https://<your-app-name>.<your-account-name>.workers.dev/api/auth/health
    ```

    You may see `localhost:3000` as the redirect URLs in the response. This is expected because Cloudflare Workers doesn't read variables from the `.env.local` file. We will update this in the next step.

## Step 3: Add Kinde env variables and redeploy

1. In your Kinde dashboard, go to your application > **Details** and add the following URLs: 

    - **Allowed callback URLs**: `https://your_app_name.your_account_name.workers.dev/api/auth/kinde_callback`
    - **Allowed logout redirect URLs**: `https://your_app_name.your_account_name.workers.dev`

    Select **Save**

2. Update your `wrangler.toml` to include the following variables. You can get these from your Kinde application's **Quick start** page.

    ```toml
    # wrangler.toml
    # ...your existing config...
    [vars]
    KINDE_CLIENT_ID = "your_client_id"
    KINDE_CLIENT_SECRET = "your_client_secret"
    KINDE_ISSUER_URL = "https://your_business.kinde.com"
    KINDE_SITE_URL = "https://your_app_name.your_account_name.workers.dev"
    KINDE_POST_LOGIN_REDIRECT_URL = "https://your_app_name.your_account_name.workers.dev/dashboard"
    KINDE_POST_LOGOUT_REDIRECT_URL = "https://your_app_name.your_account_name.workers.dev"
    ```

3. Redeploy your project to Cloudflare Workers using the following command:

    ```bash
    npm run deploy
    ```

4. Verify your deployment by visiting your app in the browser. Sign in or sign up with Kinde and you should be redirected to the dashboard page.

## Troubleshooting

### Verify your configuration

After deploying, you can verify your Kinde configuration by visiting:

```
https://your-app-url.com/api/auth/health
```

This endpoint will show your SDK configuration (with secrets redacted) to help debug any issues. You should see your Kinde application's details.

### Blank white screen after deployment

**Cause:**

The server returns 200 OK but the HTML body is empty. This is usually caused by `KindeProvider` being used in a way that breaks SSR on Cloudflare Workers.

**Fix:**

Remove `KindeProvider` from your providers and rely on server-side authentication patterns instead. Use the server-side authentication methods provided by the Kinde Next.js SDK.

### Login redirects to localhost

**Cause:**

Clicking login redirects to `localhost:3000` instead of your Kinde domain. Environment variables are not being read correctly, so the SDK falls back to development defaults when it can't find the configuration.

**Fix:**

1. Ensure `nodejs_compat_populate_process_env` is in your `compatibility_flags` in `wrangler.toml`
2. Add all Kinde environment variables to the `[vars]` section of `wrangler.toml`
3. Update the callback and logout redirect URLs in your Kinde application to match the URL you're accessing the app from
4. Redeploy your application

### "State not found" error

**Cause:**

After authenticating with Kinde, you're redirected back with a "state not found" error. The authentication state cookie isn't being persisted correctly between the redirect.

**Fix:**

- Ensure your `KINDE_SITE_URL` exactly matches the URL you're accessing the app from
- Check that cookies are being set correctly in your Cloudflare Workers configuration
- If using a custom domain, ensure it's properly configured in both Cloudflare and Kinde

### Environment variables undefined in production

**Cause:**

Auth works locally but fails in production with undefined configuration errors. Cloudflare Dashboard environment variables aren't automatically available via `process.env`.

**Fix:**

Environment variables must be defined in `wrangler.toml` for the SDK to access them. The Cloudflare Dashboard variables are available as Worker bindings but not through `process.env` without the `nodejs_compat_populate_process_env` compatibility flag.

For more troubleshooting and information, see the [Cloudflare Next.js documentation](https://developers.cloudflare.com/workers/framework-guides/web-apps/nextjs/)

