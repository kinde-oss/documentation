---
page_id: 919c0745-3dfb-4911-b743-f8a67a0287bf
title: Test authentication flows
description: "Guide to testing authentication flows with Cypress."
sidebar:
  order: 2
topics:
  - developer-tools
  - testing
  - cypress
  - e2e-testing
  - authentication
sdk: []
languages:
  - JavaScript
  - TypeScript
audience: developers
complexity: intermediate
keywords:
  - cypress
  - testing
  - authentication flows
  - sign-up
  - sign-in
  - sign-out
updated: 2025-01-15
featured: false
deprecated: false
---

Learn how to test authentication flows (sign-up, sign-in, sign-out) with Cypress for applications using Kinde authentication.

### Prerequisites

Before you begin, make sure you have:
- Completed the [Cypress setup](/testing/cypress/)
- A [test user with email and password](/testing/setup-test-user-environment/)
- A [running test application](/testing/setup-test-user-environment/#step-3-create-a-test-application) for testing locally

## Testing sign-in flows

For sign-in flows:

1. **Use existing test user**: Create a verified test user beforehand
2. **Test both success and failure**: Test valid credentials and invalid credentials
3. **Verify session**: Ensure the user is properly authenticated after sign-in
4. **Test redirects**: Verify redirects to intended pages

### General pattern

The typical sign-in flow involves:

1. Navigate to your application
2. Click the sign-in button (redirects to Kinde)
3. Enter email and submit
4. Enter password and submit
5. Wait for redirect back to your application
6. Verify the user is authenticated

**Key selectors to use:**
- Email input: `input[name="p_email"]`
- Password input: `input[name="p_password"]`
- Submit button: `button[type="submit"]`

### Example: Sign in with Cypress

Add the following to your `spec.cy.js` file:

```js
// spec.cy.js
describe('Authentication Flows', () => {
  it('user can sign in with email and password', () => {
    cy.visit(Cypress.env('TEST_APP_URL'))
    cy.get('[data-testid="sign-in-button"]').click()

    // Wait for Kinde login page
    cy.url().should('include', 'kinde.com')

    cy.origin(Cypress.env('KINDE_ISSUER_URL'), () => {
      // Enter credentials
      cy.get('input[name="p_email"]').type(Cypress.env('TEST_USER_EMAIL'))
      cy.get('button[type="submit"]').click()

      cy.get('input[name="p_password"]').type(Cypress.env('TEST_USER_PASSWORD'))
      cy.get('button[type="submit"]').click({ multiple: true })
    })
    // Wait for redirect back to app
    cy.url().should('include', new URL(Cypress.env('TEST_APP_URL')).hostname)
    cy.get('[data-testid="user-profile"]').should('be.visible')
  })

  it('user can sign out', () => {
    // First authenticate (or use cy.session for state reuse)
    cy.visit(Cypress.env('TEST_APP_URL'))
    cy.get('[data-testid="sign-in-button"]').click()
    cy.origin(Cypress.env('KINDE_ISSUER_URL'), () => {
      // Enter credentials
      cy.get('input[name="p_email"]').type(Cypress.env('TEST_USER_EMAIL'))
      cy.get('button[type="submit"]').click()

      cy.get('input[name="p_password"]').type(Cypress.env('TEST_USER_PASSWORD'))
      cy.get('button[type="submit"]').click({ multiple: true })
    })
    cy.url().should('include', new URL(Cypress.env('TEST_APP_URL')).hostname)

    // Now sign out
    cy.get('[data-testid="sign-out-button"]').click()

    // Should show signed-out state
    cy.get('[data-testid="sign-in-button"]').should('be.visible')
  })
})
```

## Testing sign-up flows

Kinde requires OTP email verification when signing up for a new user. See the [Testing Passwordless Flows](/testing/cypress/test-passwordless-flows/) guide for details on how to handle OTP verification in your test methods.

When testing sign-up flows, ensure:

1. **Test user doesn't exist**: Use unique email addresses for each test run (e.g., `test-${timestamp}@example.com`)
2. **Handle email verification**: Use an email testing service to test user sign up
3. **Verify redirect**: Check that users are redirected to the correct page after sign-up
4. **Test error cases**: Test with invalid emails, weak passwords, etc.

### General pattern

The typical sign-up flow involves:

1. Navigate to your application
2. Click the sign-up button (redirects to Kinde)
3. Fill in first name, last name, email, accept the terms, and submit the form
4. Handle OTP email verification (extract code from email and enter it)
5. Fill in password and submit the form
6. Wait for redirect back to your application
7. Verify the user is authenticated

**Key selectors to use:**
- First name input: `input[name="p_first_name"]`
- Last name input: `input[name="p_last_name"]`
- Email input: `input[name="p_email"]`
- Password input: `input[name="p_first_password"]` 
- Password confirmation: `input[name="p_second_password"]`
- Terms and conditions checkbox: `input[name="p_has_clickwrap_accepted"]`
- OTP input: `input[name="p_confirmation_code"]`
- Submit button: `button[type="submit"]`

### Example: Sign up flow with Cypress

```ts
// spec.cy.ts
describe('Authentication Flows', () => {
  it('user can sign up with email and password', () => {
      // Generate unique email for this test run
      const timestamp = Date.now();
      const testEmail = `test-${timestamp}@testemail.com`;
      
      cy.visit(Cypress.env('TEST_APP_URL'));
      cy.get('[data-testid="sign-up-button"]').click();
      
      // Wait for Kinde sign-up page
      cy.url().should('include', 'kinde.com');
      
      // Fill sign-up form
      cy.origin(Cypress.env('KINDE_ISSUER_URL'), { args: { testEmail } }, ({ testEmail }) => {
          cy.get('input[name="p_first_name"]').type('John');
          cy.get('input[name="p_last_name"]').type('Doe');
          cy.get('input[name="p_email"]').type(testEmail);
          cy.get('input[name="p_has_clickwrap_accepted"]').check(); // Accept terms and conditions
          cy.get('button[type="submit"]').click();
      });

      // Handle OTP email verification in this step
      // See Testing Passwordless Flows guide for email service integration
      
      cy.origin(Cypress.env('KINDE_ISSUER_URL'), () => {
        cy.get('input[name="p_first_password"]').type(Cypress.env('TEST_USER_PASSWORD')!)
        cy.get('input[name="p_second_password"]').type(Cypress.env('TEST_USER_PASSWORD')!)
        cy.get('button[type="submit"]').click();
      });
      
      // Wait for redirect back to app
      cy.url().should('include', new URL(Cypress.env('TEST_APP_URL')).hostname);
      cy.get('[data-testid="user-profile"]').should('be.visible');
    });
});
```

## Testing sign-out flows

Test that sign-out:

1. **Clears session**: User is no longer authenticated
2. **Redirects correctly**: User is redirected to the intended page
3. **Protects routes**: Protected routes are no longer accessible

### General pattern

The typical sign-out flow involves:

1. Authenticate the user first
2. Click the sign-out button
3. Verify the user is signed out (sign-in button visible)
4. Attempt to access protected routes
5. Verify redirect to sign-in page

## Running tests

Run the Cypress tests:

```bash
npx cypress open
```

You should now see the Cypress tests in the browser.

![Cypress tests passed](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/f652e891-5863-402d-ec3d-16576792a600/socialsharingimage)

## Best practices

1. **Use data-testid attributes**: Add test IDs to your UI elements for reliable selectors
2. **Handle redirects gracefully**: Add appropriate waits for Kinde redirects (they can take time)
3. **Use cy.origin() for cross-origin**: Always use `cy.origin()` when interacting with Kinde's domain
4. **Isolate test users**: Use separate test users for each test run when possible
5. **Clean up test data**: Delete test users or test data after test runs when possible
6. **Handle flakiness**: Add retry logic for network-related failures
7. **Use environment variables**: Store test credentials securely, never commit to source control

## What's not supported

The following limitations apply to UI authentication flow testing:

- **Social provider flows**: Automated testing of Google, GitHub, or other social sign-in flows is not directly supported due to third-party provider restrictions
- **Enterprise SSO flows**: Testing SAML/SSO enterprise connections requires coordination with identity providers
- **MFA flows**: Testing multi-factor authentication may require manual intervention
- **Real email delivery**: Testing with real email addresses requires manual code entry (use test email services instead)

## Passwordless authentication flows

If your application uses passwordless authentication with email OTP, see the dedicated guide on **[Testing Passwordless Flows](/testing/cypress/test-passwordless-flows/)**.
