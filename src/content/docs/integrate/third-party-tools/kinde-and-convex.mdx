---
page_id: f3dcba7f-fa4f-4ea1-a470-f03af04ba347
title: Kinde and Convex
description: Integrate Kinde with Convex to enable real-time user data sync and secure authentication with Kinde access tokens.
sidebar:
  order: 9
relatedArticles:
  - 78f0242c-3a49-4c8d-8168-019fd69ef838
  - a07f8f6b-5d6a-4096-be52-7b13b4a3b0a5
tableOfContents:
  maxHeadingLevel: 3
topics:
  - integrate
  - third-party-tools
sdk:
  - React.js
languages:
  - bash
  - typescript
  - json
audience:
  - developers
complexity: intermediate
keywords:
  - react
  - convex
  - express
  - authentication
  - database
  - webhooks
updated: 2026-02-25
featured: false
deprecated: false
ai_summary: Integrate Kinde with Convex to enable real-time user data sync and secure authentication with Kinde access tokens.
---

Bring real-time interactivity to your app with Convex, a powerful Backend-as-a-Service designed for dynamic React experiences.

## Quickstart

1. Setup a new React project by running the following command:

    ```bash
    npm create vite@latest my-app -- --template react-ts
    ```

2. Setup a [Kinde React application](/developer-tools/sdks/frontend/react-sdk/) and obtain the **Client ID** and your **Kinde domain**

3. Register a new API for Convex in Kinde
   - In Kinde, go to **Settings > APIs > Add API**
   - Type a name for the API (e.g., Convex), and code `convex`
   - Go to your Convex application > **APIs** > select the **three dots** next to your Convex API and select **Authorize application**

4. Install the Convex dependencies:

    ```bash
    npm install convex
    ```

    Use the following command to sign-in to Convex and initialize a new project. Keep this terminal running for the development server.

    ```bash
    npx convex dev
    ```

5. Update your `main.tsx` file to include the Kinde and Convex providers:

    ```tsx
    // src/main.tsx
    import { StrictMode } from "react";
    import { createRoot } from "react-dom/client";
    import "./index.css";
    import App from "./App.tsx";
    import { KindeProvider } from "@kinde-oss/kinde-auth-react";
    import { ConvexProviderWithAuth, ConvexReactClient } from "convex/react";
    import useAuthFromKinde from "./hooks/useAuthFromKinde.ts";

    const convex = new ConvexReactClient(import.meta.env.VITE_CONVEX_URL as string);

    createRoot(document.getElementById("root")!).render(
    <StrictMode>
        <KindeProvider
        clientId="your_kinde_client_id"
        domain="https://your_kinde_business.kinde.com"
        logoutUri={window.location.origin}
        redirectUri={window.location.origin}
        audience="convex"
        >
            <ConvexProviderWithAuth client={convex} useAuth={useAuthFromKinde}>
                <App />
            </ConvexProviderWithAuth>
        </KindeProvider>
    </StrictMode>,
    );
    ```

    Create a new hook directory and add the following code to the hook:

    ```bash
    mkdir -p src/hooks
    touch src/hooks/useAuthFromKinde.ts
    ```

    ```tsx
    // src/hooks/useAuthFromKinde.ts
    import { useKindeAuth } from "@kinde-oss/kinde-auth-react";
    import { useCallback, useMemo } from "react";

    export default function useAuthFromKinde() {
    const { isLoading, isAuthenticated, getAccessToken } = useKindeAuth();
    const fetchAccessToken = useCallback(
        async ({ forceRefreshToken }: { forceRefreshToken: boolean }) => {
        if (forceRefreshToken) {
            try {
            const response = await getAccessToken();
            // Returns the token as string
            return response as string;
            } catch (error) {
            return null;
            }
        }
        // Add this line to ensure the function always returns a string or null
        return null;
        },
        [getAccessToken],
    );
    return useMemo(
        () => ({ isLoading, isAuthenticated, fetchAccessToken }),
        [isLoading, isAuthenticated, fetchAccessToken],
    );
    }
    ```
6. Connect Convex backend auth by adding a `auth.config.ts` file:

    ```bash
    touch convex/auth.config.ts
    ```

    ```typescript
    // convex/auth.config.ts
    import { AuthConfig } from "convex/server";

    // domain must match the ID token's "iss"; applicationID must match the ID token's "aud".
    // Decode your ID token at jwt.io to confirm (use getIdToken() and paste the string).
    export default {
    providers: [
        {
        domain: "https://your_kinde_business.kinde.com",
        applicationID: "convex",
        },
    ],
    } satisfies AuthConfig;
    ```
7. Add Convex auth utilities to your component: 

    ```tsx
    // src/App.tsx
    import "./App.css";
    import {
    LoginLink,
    LogoutLink,
    RegisterLink,
    } from "@kinde-oss/kinde-auth-react/components";
    import { useKindeAuth } from "@kinde-oss/kinde-auth-react";
    import { Authenticated, Unauthenticated, useConvexAuth } from "convex/react";

    function App() {
        const { user } = useKindeAuth();
        const { isLoading } = useConvexAuth();

        if (isLoading) {
          return <div>Loading...</div>;
        }

        return (
            <>
            <Authenticated>
              <div>
                Hello {user?.givenName} {user?.familyName}
                <br />
                Logged in | <LogoutLink>Sign out</LogoutLink>
              </div>
            </Authenticated>
            <Unauthenticated>
              <div>
                <LoginLink>Sign in</LoginLink>
                <RegisterLink>Sign up</RegisterLink>
              </div>
            </Unauthenticated>
            </>
        );
    }

    export default App;
    ```


### Sync Kinde users to Convex database

By default, Convex will have access to the currently logged in user's Kinde ID. However, if you want to store additional user data in the Convex database follow the steps below:

1. Create and save the following Convex schema:

    ```bash
    touch convex/schema.ts
    ```

    ```typescript
    // convex/schema.ts
    import { defineSchema, defineTable } from "convex/server";
    import { v } from "convex/values";

    export default defineSchema({
    users: defineTable({
        kindeId: v.string(),
        givenName: v.optional(v.string()),
        familyName: v.optional(v.string()),
        email: v.optional(v.string()),
    }).index("by_kinde_id", ["kindeId"]),
    });
    ```
2. Create the users file and add the contents:

    ```bash
    touch convex/users.ts
    ```

    ```typescript
    // convex/users.ts
    import { v } from "convex/values";
    import {
    internalMutation,
    mutation,
    query,
    type QueryCtx,
    } from "./_generated/server";

    export const store = mutation({
    args: {
        givenName: v.optional(v.string()),
        familyName: v.optional(v.string()),
        email: v.optional(v.string()),
    },
    handler: async (ctx, args) => {
        const identity = await ctx.auth.getUserIdentity();

        if (!identity) {
        throw new Error("Called storeUser without authentication present");
        }

        // Prefer Kinde user object (passed from client); fall back to JWT identity claims.
        const kindeProfile: Record<string, string> = {};
        const givenName = args.givenName ?? identity.givenName;
        const familyName = args.familyName ?? identity.familyName;
        const email = args.email ?? identity.email;
        if (givenName !== undefined) kindeProfile.givenName = givenName;
        if (familyName !== undefined) kindeProfile.familyName = familyName;
        if (email !== undefined) kindeProfile.email = email;

        // Check if we've already stored this identity before.
        const user = await ctx.db
        .query("users")
        .withIndex("by_kinde_id", (q) => q.eq("kindeId", identity.subject))
        .unique();

        if (user !== null) {
        if (Object.keys(kindeProfile).length > 0) {
            await ctx.db.patch(user._id, kindeProfile);
        }
        return user._id;
        }
        return await ctx.db.insert("users", {
        kindeId: identity.subject,
        ...kindeProfile,
        });
    },
    });
    ```

3. Update your App.tsx file with the contents:

    ```tsx
    // src/App.tsx
    import "./App.css";
    import {
    LoginLink,
    LogoutLink,
    RegisterLink,
    } from "@kinde-oss/kinde-auth-react/components";
    import { useKindeAuth } from "@kinde-oss/kinde-auth-react";
    import {
    Authenticated,
    Unauthenticated,
    useConvexAuth,
    useMutation,
    } from "convex/react";
    import { useEffect, useRef } from "react";
    import { api } from "../convex/_generated/api";

    function App() {
    const { user } = useKindeAuth();
    const { isLoading, isAuthenticated } = useConvexAuth();
    const storeUser = useMutation(api.users.store);
    const hasUpserted = useRef(false);

    useEffect(() => {
        if (!isAuthenticated || !user || hasUpserted.current) return;
        hasUpserted.current = true;
        storeUser({
        givenName: user.givenName,
        familyName: user.familyName,
        email: user.email,
        }).catch(console.error);
    }, [isAuthenticated, user, storeUser]);

    if (isLoading) {
        return <div>Loading...</div>;
    }

    return (
        <>
        <Authenticated>
            <div>
            Hello {user?.givenName} {user?.familyName}
            <br />
            Logged in | <LogoutLink>Sign out</LogoutLink>
            </div>
        </Authenticated>
        <Unauthenticated>
            <div>
            <LoginLink>Sign in</LoginLink>
            <RegisterLink>Sign up</RegisterLink>
            </div>
        </Unauthenticated>
        </>
    );
    }

    export default App;

    ```

    The code will store the user data in the Convex database under the `users` table when the user signs in. You can now query the user data in the Convex database using the `useQuery` hook.

    ![convex users database](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/d59004b6-fe09-4529-a441-83cfebae8d00/socialsharingimage)

## Tutorial: Create a Todo App with Convex

Now, with Kinde webhooks, you can seamlessly sync user data from Kinde into your Convex database. This allows you to authenticate queries and mutations in Convex using access tokens generated by Kinde Auth.

Convex and Kinde work great togetherâ€”this guide shows you how to connect them using webhooks so that your data stays in sync and your app stays secure.

### Step 1: Set up your Convex project

TODO: Add task related update here

1. Clone or download the [Kinde Convex Auth starter kit from GitHub](https://github.com/tamalchowdhury/kinde-convex-auth) using the following bash command:
    
    This will generate a starter React Convex project with sample schema and route files included.
    
    ```bash
    git clone https://github.com/tamalchowdhury/kinde-convex-auth.git
    ```
    
2. Change into the project directory:
    
    ```bash
    cd kinde-convex-auth
    ```
    
3. Install the project dependencies:
    
    ```bash
    npm install
    ```
    
4. Create a `.env` file with the bash command:
    
    ```bash
    touch .env
    ```
    
5. Open the `.env` file with your preferred code editor, and enter the variables found on **Kinde > Kinde & Convex** (your application) **> Quick Start** page.

    ![update environment variables](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/6cf8cb14-3df0-4042-5fda-a3d317623d00/public)

6. Run the following command in your terminal. This will prompt you to log into your Convex account and walk you through setting up the project.
    
    ```bash
    npx convex dev
    ```
    
7. If you see an env variable error, it means you need to add your Kinde domain as the `VITE_KINDE_DOMAIN` in Convex.

    ![convex env variable error](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/7e6016cf-fc5b-43b0-d35e-cb3201f99800/public)

8. Go to your **Convex dashboard > Project > Settings > Environment Variables.**
9. Set the `VITE_KINDE_DOMAIN` using the credentials from your Kinde **Quick start** page.
    
    
    ![convex setup environment variable](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/e48a3c7a-9930-481e-472b-71ceea5ab300/public)
    
10. After the set up is complete, you should see green checkmarks in your terminal. Keep this Convex development running in the background to continue working with your project locally.

    ![convex success](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/978abdd0-8d16-4921-1db0-cba1377aa000/public)

### Step 2: Set up the Kinde webhook

Your Convex project creates a custom endpoint under the `/kinde-users-webhook` route. If you open the `/convex/http.ts` file, you can see a new route definition for your Convex backend. 

This endpoint will be listening for an incoming `POST` request from Kinde.

1. Go to your **Convex dashboard > Project > Settings > URL & Deploy Key.**
2. Select **Show development credentials** and copy the **HTTP Actions URL.**
    
    ![convex show development credentials page](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/d69caa08-07a1-443b-fd42-414208807e00/public)
    
3. In Kinde Home, go to **Settings > Webhooks.** 
4. Select **Add webhook**. 
5. Enter the webhook **Name** and description
6. Add the **Endpoint URL.** This is the **HTTP Actions URL** you copied in Convex: `https://your_convex_subdomain.convex.site/kinde-users-webhook`
    
    ![kinde add webhook endpoint](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/0e197529-2e6f-4f68-4f3e-3147a71e2000/public)
    
7. Scroll down and select **Add event**. 
8. Select all the user-specific events your application will listen for, and select **Save**.
    
    ![kinde add events in webhook](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/dd6ab394-a797-4a43-5152-61c995991d00/public)
    
9. Select **Save** on the webhook creation page to finish creating the webhook.

### Step 3: Test your Convex application

1. Open a new terminal window, but keep the Convex dev server running in the first one.
2. Enter the following command to run the Vite project.
    
    ```bash
    npm start
    ```
    
3. Go to [http://localhost:3000](http://localhost:3000) and sign in or create a new account.
    
    Each time a new user signs up or signs in to your application:
    
    - a webhook fires from Kinde to your Convex backend with the user ID.
    - Convex backend stores the user in the database with the `upsertFromKinde` handler in the `/convex/users.ts` file.
    
    You can find it in Convex, in the **Convex dashboard > Data >  users** table.
    
    ![convex users database](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/6f14730c-720b-4b87-1c4b-3dd8aabd4200/public)
    
4. Enter a task and select **send**. You will see the task show up in your application.
    
    ![kinde react demo application](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/f6851728-3dd3-4b0b-9479-efaa3230a700/public)
    

### The Kinde and Convex webhook result

- The task is saved to the Convex database using the `send` handler in `/convex/tasks.ts` file.
- The React client page calls the database using the `get` handler of `/convex/tasks.ts` using the `useQuery` hook in `/src/components/Tasks.tsx` file.

This happens in real-time thanks to Convex sync.

You can see the tasks in **Convex Dashboard > Database > tasks** table.

![convex database tables](https://imagedelivery.net/skPPZTHzSlcslvHjesZQcQ/9ee983f7-04e2-455b-5732-d6669b0e6700/public)

### You have done it ðŸŽ‰

With webhooks in place, your Kinde user data is now automatically synced to your Convex database. This gives your application fast, secure access to user information while avoiding common performance issues like n+1 queries. It also ensures your UI stays responsive to real-time data updates.

Webhooks offer a flexible way to extend Kindeâ€™s authentication and user management into your backend workflows, so you can work with the tools you already use while keeping everything connected.

Follow best practices, test your integration carefully, keep your dependencies up to date, and monitor for any security advisories to ensure everything runs smoothly.

If you need help, reach out to us at [support@kinde.com](mailto:support@kinde.com). You can also join the [Kinde community on Slack](https://join.slack.com/t/thekindecommunity/shared_invite/zt-2k5i0aeet-d6Z_2qYphcNCpj0bFa4oCg) or [Discord](https://discord.gg/wHX6j7wG5d) to connect with the team and others building with Kinde.